<?phpclass Faq extends CI_Controller {	var $urlfix = "";		function __construct()	{		parent::__construct();		$this->controller = 'faq';		$this->load->model('ModelFaq');	}		function index()	{		$this->functions->checkAdmin($this->controller.'/');		$config['base_url'] 			= base_url($this->controller."/index/");				$config['uri_segment']  		= 3;		$config['num_links'] 			= 10;		$config['page_query_string'] 	= false;		$config['extra_params'] 		= ""; 		$config['extra_params'] 		= "";				$this->pagination->setAdminPaginationStyle($config);		$start = 0;				$data['controller'] = $this->controller;		$data['module'] = 'Help Center';				$param['sortType'] 			= $this->input->request('sortType','DESC');		$param['sortField'] 		= $this->input->request('sortField','id');		$param['searchField'] 		= $this->input->request('searchField','');		$param['searchString'] 		= $this->input->request('searchString','');		$param['searchText'] 		= $this->input->request('searchText','');		$param['searchFromDate'] 	= $this->input->request('searchFromDate','');		$param['searchToDate'] 		= $this->input->request('searchToDate','');		$param['searchDisplay'] 	= $this->input->request('searchDisplay','20');		$param['searchAlpha'] 		= $this->input->request('txt_alpha','');		$param['searchMode'] 		= $this->input->request('search_mode','STRING');		$data['recordset'] 		= $this->ModelFaq->getList($config,$start,$param);		$data['startRecord'] 	= $start;				$this->pagination->initialize($config);				$data['params'] 			= $this->nsession->userdata('ADMIN_FAQ');		$data['reload_link']      	= base_url($this->controller."/index/");		$data['search_link']        = base_url($this->controller."/index/0/1/");		$data['add_link']         	= base_url($this->controller."/addedit/0/0/");		$data['edit_link']        	= base_url($this->controller."/addedit/{{ID}}/0");		$data['activated_link']     = base_url($this->controller."/activate/{{ID}}/0");		$data['inacttived_Link']    = base_url($this->controller."/inactive/{{ID}}/0");		$data['delete_link']      	= base_url($this->controller."/delete/{{ID}}/0");		$data['showall_link']     	= base_url($this->controller."/index/0/1");		$data['total_rows']			= $config['total_rows'];				$data['succmsg'] 	= $this->nsession->userdata('succmsg');		$data['errmsg'] 	= $this->nsession->userdata('errmsg');				$this->nsession->set_userdata('succmsg', "");		$this->nsession->set_userdata('errmsg', "");				$elements = array();		$elements['menu'] = 'menu/index';		$elements['topmenu'] = 'menu/topmenu';		$elements['main'] = 'faq/index';		$element_data['main'] = $data;				$this->layout->setLayout('layout_main_view'); 		$this->layout->multiple_view($elements,$element_data);		}		//==========Initialize $data for Add =======================		function addedit($id = 0)	{		$this->functions->checkAdmin($this->controller.'/');		//if add or edit		$startRecord  	= 0;		$contentId 		= $this->uri->segment(3, 0); 		$page 			= $this->uri->segment(4, 0); 				if($page > 0)			$startRecord = $page; 		$page = $startRecord;				$data['controller'] 		= $this->controller;		$data['action'] 			= "Add";		$data['params']['page'] 	= $page;		$data['do_addedit_link']	= base_url($this->controller."/do_addedit/".$contentId."/".$page."/");		$data['back_link']			= base_url($this->controller."/index/");		if($contentId > 0)		{			$data['adminpage_id'] = $contentId;			$data['action'] = "Edit";			//=================prepare DATA ==================			$rs = $this->ModelFaq->getSingle($contentId );			//$row = $rs->fields;			if(is_array($rs[0]))			{				foreach($rs[0] as $key => $val)				{					if(!is_numeric($key))					{						$data[$key] = $val;					}				}                       }		}else{			$data['action'] 	= "Add";			$data['id']			= 0;						$data['question'] 		= $this->input->request('question');			$data['answer'] 		= $this->input->request('answer');		}				$data['succmsg'] = $this->nsession->userdata('succmsg');		$data['errmsg'] = $this->nsession->userdata('errmsg');		$this->nsession->set_userdata('succmsg', "");		$this->nsession->set_userdata('errmsg', "");				$elements = array();		$elements['menu'] = 'menu/index';		$elements['topmenu'] = 'menu/topmenu';		$elements['main'] = 'faq/add_edit';		$element_data['main'] = $data;				$this->layout->setLayout('layout_main_view'); 		$this->layout->multiple_view($elements,$element_data);			}		function do_addedit()	{		$this->functions->checkAdmin($this->controller.'/');		$contentId = $this->uri->segment(3, 0); 		$page = $this->uri->segment(4, 0); 				$question		= $this->input->request('question');				$this->form_validation->set_rules('question', 'Help Center Question', 'trim|required|xss_clean');				$this->form_validation->set_error_delimiters('<div class="error">', '</div>');				if($this->form_validation->run() == TRUE)		{			$isContentExist = $this->functions->existRecords('faq','question',$question,'id',$contentId);			if($isContentExist)			{				$this->nsession->set_userdata('errmsg', 'Help Center Question already exist');				redirect(base_url($this->controller."/index/"));				return true;			}else{				$data['question'] 		= $this->input->request('question');				$data['answer'] 		= $this->input->request('answer');								if($contentId > 0)   //edit				{					$affected_row = $this->ModelFaq->editContent($contentId,$data);					$this->nsession->set_userdata('succmsg', 'Successfully Help Center content Edited.');					redirect(base_url($this->controller."/index/"));					return true;				}				else    //add				{						$insert_id = $this->ModelFaq->addContent($data);										if($insert_id)					{						$this->nsession->set_userdata('succmsg', 'Successfully Help Center content Added.');						redirect(base_url($this->controller."/index/"));						return true;					}				}			}		}		else		{			$this->addedit($contentId,$page);		}		}		function delete()	{		$this->functions->checkAdmin($this->controller.'/');		$id = $this->uri->segment(3, 0);				$this->ModelFaq->delete($id);				$this->nsession->set_userdata('succmsg', 'Successfully Help Center content Deleted.');		redirect(base_url($this->controller."/index/"));		return true;	}	function inactive()	{		$this->functions->checkAdmin($this->controller.'/');		$id = $this->uri->segment(3, 0);				$this->ModelFaq->inactive($id);				$this->nsession->set_userdata('succmsg', 'Successfully Help Center content Inactivated.');		redirect(base_url($this->controller."/index/"));		return true;	}	function activate()	{		$this->functions->checkAdmin($this->controller.'/');		$id = $this->uri->segment(3, 0);				$this->ModelFaq->activate($id);				$this->nsession->set_userdata('succmsg', 'Successfully Help Center content Inactivated.');		redirect(base_url($this->controller."/index/"));		return true;	}}/* End of file welcome.php *//* Location: ./system/application/controllers/welcome.php */?>